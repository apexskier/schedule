<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta name="description" content="">
        <meta name="author" content="">

        <title>Starter Template for Bootstrap</title>

        <!-- Bootstrap core CSS -->
        <link rel="stylesheet" href="css/bootstrap-min.css">

        <!-- Custom styles for this template -->
        <style>
            .navbar {
                margin-bottom: 10px;
            }
            .day {
                margin-bottom: 2em;
                border-left: 0.2em dotted #ccc;
                padding-left: 0.2em;
            }
            .day-of-week {
                margin-left: 0.4em;
            }
            .event {
                border-left: 0.2em solid;
                padding-left: .5em;
            }

            .border-muted {
                border-color: rgb(153, 153, 153);
            }
            .border-primary {
                border-color: rgb(66, 139, 202);
            }
            .border-warning {
                border-color: rgb(192, 152, 83);
            }
            .border-danger {
                border-color: rgb(185, 74, 72);
            }
            .border-success {
                border-color: rgb(70, 136, 71);
            }
            .border-info {
                border-color: rgb(58, 135, 173);
            }

            .tooltip-trigger {
                cursor: pointer;
            }
        </style>
    </head>

    <body>
        <div class="navbar navbar navbar-top">
            <div class="container">
                <a class="navbar-brand" href="#">Schedule</a>
            </div>
        </div>

        <div class="container">
            <div class="row" id="main">
                <div class="col-sm-9" id="content">
                </div>
                <div class="col-sm-3 text-right">
                    <div id="person">
                        <h4>#person</h4><!-- #hashtags for you, @firass -->
                        <ul id="all_people" class="list-unstyled"></ul>
                    </div>
                    <div id="job">
                        <h4>#job</h4>
                        <ul id="all_jobs" class="list-unstyled"></ul>
                    </div>
                    <button id="show_events" class="btn btn-default btn-small">Show All Events</button>
                </div>
            </div>
        </div><!-- /.container -->

    <script src="http://code.jquery.com/jquery-1.10.1.min.js"></script>
    <script type="text/javascript" src="js/underscore-min.js"></script>
    <script type="text/javascript" src="js/backbone-min.js"></script>
    <script type="text/javascript" src="js/moment-min.js"></script>
    <script type="text/javascript" src="js/bootstrap-min.js"></script>
    <script type="text/javascript" src="js/script.js"></script>

    <script type="text/template" id="list-item-template">
        <a href="#"><%- name %></a>
    </script>
    <script type="text/template" id="short-event-template">
        <a href="#event/<%- id %>"><%- name %></a>
    </script>
    <script type="text/template" id="short-job-template">
        <a href="#job/<%- title_sanitized %>"><%- name %></a>
    </script>
    <script type="text/template" id="short-person-template">
        <a href="#person/<%- username %>"><%- name %></a>
    </script>
    <script type="text/template" id="detail-template">
        <h3></h3>
        <p></p>
    </script>
    <script type="text/template" id="detail-event-template">
        <h3><%- name %></h3>
        <p><%- new moment(time.start).format("dddd, MMM Do h:mm a") %>
        <% if (time.end) { %> to <%- new moment(time.end).format("dddd, MMM Do h:mm a") %><% } %>
        <% if (place) { %> at <%- place %><% } %></p>
        <p><%- description %></p>
    </script>
    <script type="text/template" id="detail-job-template">
        <h2><%- name %></h2>
        <ul id="people" class="list-unstyled list-inline">
            <% _.each(people, function(p) { %>
                <li><a href="#person/<%- p %>"><%- p %></a></li>
            <% }); %>
        </ul>
        <ul id="events" class="list-unstyled">
            <% _.each(e_data, function(d) { %>
                <li class="day list-unstyled">
                    <h3 class="day-of-week"><%- new moment(d[0].time.start).format('dddd, MMM Do') %></h3>
                    <ul class="list-unstyled">
                        <% _.each(d, function(e) { %>
                            <li class="event border-<%- e.req.label %>" style="min-height: <%- e.height %>em;">
                                <span class="tooltip-trigger label pull-right label-<%- e.req.label %>" data-toggle="tooltip" data-placement="left" title="<%- e.req.description %>"><%- e.req.text %></span>
                                <h4><%- e.name %></h4>
                                <p><% if (e.place) { %><%- e.place %>, <% } %>
                                <%- new moment(e.time.start).format("h:mm a") %><% if (e.time.end) { %> - <%- new moment(e.time.end).format("h:mm a") %><% } %></p>
                                <% if (e.description) { %>
                                    <p><%- e.description %></p>
                                <% } %>
                            </li>
                        <% }); %>
                    </ul>
                </li>
            <% }); %>
        </ul>
    </script>
    <script type="text/template" id="detail-person-template">
        <h2><%- name %> <small><% _.each(jobs, function(j) { %><a href="#job/<%- j %>">#<%- j.replace('-', ' ') %></a> <% }) %></small></h2>
        <ul id="events" class="list-unstyled">
            <% _.each(e_data, function(d) { %>
                <li class="day list-unstyled">
                    <h3 class="day-of-week"><%- new moment(d[0].time.start).format('dddd, MMM Do') %></h3>
                    <ul class="list-unstyled">
                        <% _.each(d, function(e) { %>
                            <li class="event border-<%- e.req.label %>" style="min-height: <%- e.height %>em;">
                                <span class="tooltip-trigger label pull-right label-<%- e.req.label %>" data-toggle="tooltip" data-placement="left" title="<%- e.req.description %>"><%- e.req.text %></span>
                                <h4><%- e.name %></h4>
                                <p><% if (e.place) { %><%- e.place %>, <% } %>
                                <%- new moment(e.time.start).format("h:mm a") %><% if (e.time.end) { %> - <%- new moment(e.time.end).format("h:mm a") %><% } %></p>
                            </li>
                        <% }); %>
                    </ul>
                </li>
            <% }); %>
        </ul>
    </script>
    <script type="text/template" id="all-events-template">
        <h3>All Events</h3>
        <ul id="all_events" class="list-unstyled">
            <% _.each(events, function(d) { %>
                <li class="day list-unstyled">
                    <h3 class="day-of-week"><%- new moment(d[0].time.start).format('dddd, MMM Do') %></h3>
                    <ul class="list-unstyled">
                        <% _.each(d, function(e) { %>
                            <li class="event" style="min-height: <%- (new Date(e.time.end).getTime() - new Date(e.time.start).getTime()) / (1000 * 60 * 15) %>em;">
                                <h4><small><a href="#event/<%- e.id %>" title="<%- e.id %>">#</a></small> <%- e.name %></h4>
                                <p><% if (e.place) { %><%- e.place %>, <% } %>
                                <%- new moment(e.time.start).format("h:mm a") %><% if (e.time.end) { %> - <%- new moment(e.time.end).format("h:mm a") %><% } %></p>
                            </li>
                        <% }); %>
                    </ul>
                </li>
            <% }); %>
        </ul>
    </script>

    </body>
</html>
